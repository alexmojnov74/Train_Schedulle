<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <title>Title</title>
</head>

<body>
    <div class="container"> 
        <br>
        <!-- Jumbotron -->
        <div class="jumbotron jumbo animated slideInDown">
            <h1 class="text-center">Train Arrival Schedulle</h1>
            <h4 class="text-center">Next Arrival and Away Time Calculations</h5>
        </div>
        <div class="row animated zoomIn delay-1s slow"> 
            <div class="col-lg-12">
                <div class="card card-default">
                    <div class="card-header"> 
                        Current Train Schedulle
                    </div>
                    <div class="card-body">
                        <table class="table table-hover" id="train-table">
                            <thead>
                                <tr>
                                    <th scope="col">Train Name</th>
                                    <th scope="col">Destination</th>
                                    <th scope="col">First Train</th>
                                    <th scope="col">Frequency(min)</th>
                                    <th scope="col">Next Arrival</th>
                                    <th scope="col">Minutes Away</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                
                            </tbody>
                        </table>

                    </div>
                </div>
            </div>
        </div>
        <br>


        <button type="button" class="btn btn-danger animated flipInX delay-3s slow" data-toggle="modal" data-target=".bd-example-modal-lg">ADD TRAIN INFORMATION</button>

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" id="IDModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

        <div class="row">
            <div class="col-lg-12">
            <div class="card card-default">
            <div class="card-header">
            Add Train Information
            </div>
            <div class="card-body formcl">
        
        
            <form role="form">
            <div class="form-group row">
                <label for="name-input">Train Name:</label>
                <input class="form-control inpt" id="train-name-input" placeholder="Enter the Train Name" type="text">
            </div>
            <div class="form-group row">
                <label for="dest-input">Destination:</label>
                <input class="form-control inpt" id="destination-input" placeholder="Terminates To..." type="text">
            </div>
            <div class="form-group row">
                <label for="time-input">First Train Time:</label>
                <input class="form-control inpt" id="first-time-input" type="time">
            </div>
            <div class="form-group row">
                <label for="freq-input">Frequency</label>
                <input class="form-control inpt" id="frequency-input" type="text">
            </div>
            <button class="btn btn-danger" id="add-train-btn" type="submit">Submit</button>
            </form>
            </div>
            </div>
            </div>
            </div>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">NO ACTIVITY DETECTED</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
         <p>Please, enter the Train Information to continue</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          
        </div>
      </div>
    </div>
  </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase.js"></script>
    <script src="https://momentjs.com/downloads/moment.js"></script>
    
    <!-- JavaScript -->
    <script>

    //     var firebaseConfig = {
    //         apiKey: "AIzaSyBy01EpED3fsDUCE2yb10MkDGe3Q5rOJXc",
    //         authDomain: "my-first-project-73fae.firebaseapp.com",
    //         databaseURL: "https://my-first-project-73fae.firebaseio.com",
    //         projectId: "my-first-project-73fae",
    //         storageBucket: "my-first-project-73fae.appspot.com",
    //         messagingSenderId: "211265231075",
    //         appId: "1:211265231075:web:0fa93c966946b98a"
    //     };
        
    //     firebase.initializeApp(firebaseConfig);

        
    //     var database = firebase.database();


        
    //     $("#add-train-btn").on("click", function(event) {
    //     event.preventDefault();

    //     var trainName = $("#train-name-input").val().trim();
    //     var trainDestination = $("#destination-input").val().trim();
    //     var trainFirstTime = moment($("#first-time-input").val().trim(), "hh:mm").format("X");
    //     var trainFrequency = $("#frequency-input").val().trim();

    //     var newTrain = {
    //     name: trainName,
    //     destination: trainDestination,
    //     first: trainFirstTime,
    //     frequency: trainFrequency,

    //     };
    //     $('#IDModal').modal('hide'); 

    //     database.ref().push(newTrain);

        
    //     console.log('newTrain.name = ' + newTrain.name);
    //     console.log('newTrain.destination = ' + newTrain.destination);
    //     console.log('newTrain.first = ' + newTrain.first);
    //     console.log('newTrain.frequency = ' + newTrain.frequency);

        
    //     $("#train-name-input").val("");
    //     $("#destination-input").val("");
    //     $("#first-time-input").val("");
    //     $("#frequency-input").val("");
    //     });



    //     database.ref().on("child_added", function(childSnapshot, prevChildKey) {

    //     console.log(childSnapshot.val());

    //     var trainName = childSnapshot.val().name;
    //     var trainDestination = childSnapshot.val().destination;
    //     var trainFirstTime = childSnapshot.val().first;
    //     var trainFrequency = childSnapshot.val().frequency;

    //     console.log('trainName = ' + trainName);
    //     console.log('trainDestination = ' + trainDestination);
    //     console.log('trainFirstTime = ' + trainFirstTime);
    //     console.log('trainFrequency = ' + trainFrequency);



    //     // *********************************************

    //     console.log('trainFirstTime = ' + trainFirstTime);

    //     // Prettify the train first time
    //     var trainFirstTimePretty = moment.unix(trainFirstTime).format("LT");
    //     console.log('trainFirstTimePretty = ' + trainFirstTimePretty);

    //     // Current Time
    //     var currentTime = moment();
    //     console.log("Current Time: " + moment(currentTime).format("hh:mm"));

    //     // Difference between the times
    //     var diffTime = moment().diff(moment.unix(trainFirstTime), "minutes"); 

    //     console.log("Difference in Time (diffTime): " + diffTime);
    //     //The console is saying NaN.

    //     // Time apart (remainder)
    //     var tRemainder = diffTime % trainFrequency;
    //     console.log('tRemainder = ' + tRemainder);
    //     //The console is saying NaN.

    //     // Minute Until Train
    //     var tMinutesTillTrain = trainFrequency - tRemainder;
    //     console.log("Minutes Until Train: " + tMinutesTillTrain);
    //     //The console is saying NaN.

    //     // Next Train
    //     var nextTrain = moment().add(tMinutesTillTrain, "minutes");

    //     var nextTrainPretty = moment(nextTrain).format("LT");

    //     console.log("Arrival Time: " + moment(nextTrain).format("hh:mm"));
    //     console.log("Arrival Time Pretty: " + nextTrainPretty);


    //     $("#train-table > tbody").append("<tr><td>" + trainName + "</td><td>" + trainDestination + "</td><td>" + trainFirstTimePretty + "</td><td>" + trainFrequency + "</td><td>" + nextTrainPretty + "</td><td>" + tMinutesTillTrain + "</td><td>");
    //     });

    //     var idleTime = 0;
    //     $(document).ready(function () {
    //     //Increment the idle time counter every minute.
    //     var idleInterval = setInterval(timerIncrement, 20000); // 1 minute

    //         //Zero the idle timer on mouse movement.
    //     $(this).mousemove(function (e) {
    //     idleTime = 0;
    //     });
    //     $(this).keypress(function (e) {
    //     idleTime = 0;
    //      });
    // });

    //     function timerIncrement() {
    //     idleTime = idleTime + 1;
    //     if (idleTime > 1) { // 20 minutes
    //     $('#exampleModalCenter').modal()
    //     }
    // }
        

    </script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="main.js"></script>
</body>

</html>